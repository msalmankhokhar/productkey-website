<!doctype html>
    <html lang="en">
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <title>Keey.es | Your Ultimate Key Database!</title>
        <meta name="description" content="Get genuine activation keys and Cracks of popular paid games & softwares.">
        <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">
        <!-- <link href="https://unpkg.com/aos@2.3.1/dist/aos.css" rel="stylesheet"> -->
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css">
        <link rel="stylesheet" href="static/css/comman2.css">
        <link rel="stylesheet" href="static/css/home.css">
        <style>
          @import url('https://fonts.googleapis.com/css2?family=Poppins:wght@200;300;400;500;600;700&display=swap');
      *{
        box-sizing: border-box;
        font-family: 'Poppins', sans-serif;
      }
      ::selection{
        color: #fff;
        background: #5f0092;
      }
      
      .container .searchInput{
        background: #fff;
        width: 100%;
        border-radius: 5px;
        position: relative;
        box-shadow: 0px 1px 5px 3px rgba(0,0,0,0.12);
      }
      
      .searchInput input{
        height: 55px;
        width: 100%;
        outline: none;
        border: none;
        border-radius: 5px;
        padding: 0 60px 0 20px;
        font-size: 18px;
        box-shadow: 0px 1px 5px rgba(0,0,0,0.1);
      }
      
      .searchInput.active input{
        border-radius: 5px 5px 0 0;
      }
      
      .searchInput .resultBox{
        padding: 0;
        opacity: 0;
        pointer-events: none;
        max-height: 280px;
        overflow-y: auto;
        position: absolute;
        z-index: 1;
        width: 100%;
        background: #fff;
        box-shadow: 0px 1px 5px 3px rgba(0,0,0,0.12);
      }
      
      .searchInput.active .resultBox{
        padding: 10px 8px;
        opacity: 1;
        pointer-events: auto;
      }
      
      .resultBox li{
        list-style: none;
        padding: 8px 12px;
        display: none;
        width: 100%;
        cursor: default;
        border-radius: 3px;
      }
      
      .searchInput.active .resultBox li{
        display: flex;
        column-gap: 10px;
        align-items: center;
      }
      .resultBox li:hover{
        background: #efefef;
      }
      
      .searchInput .icon{
        position: absolute;
        right: 0px;
        top: 0px;
        height: 55px;
        width: 55px;
        text-align: center;
        line-height: 55px;
        font-size: 20px;
        color: #644bff;
        cursor: pointer;
      }
        </style>   
      <style>
          #main{
              height: 100%;
              display: flex;
              flex-direction: column;
              row-gap: 20px;
              padding: 20px 20px;
          }
          #itemThumbnail{
              width: 64px;
          }
          #desc{
              font-size: 1rem;
              color: #545454;
          }
      </style>
    </head>
    <body>
      <div>
        <div class="wave"></div>
        <div class="wave"></div>
        <div class="wave"></div>
     </div>
    
    <div class="container" id="container">
      <div id="header">
        <h1 class="text-center">Keey.es</h1>
        <p class="text-center">Online Product Keys Archive</p>
      </div>
      <div id="contentWrapper">
        <img id="itemThumbnail" src="{{sw.imgSrc}}" alt="thumbnail">
        {% if v == None %}
            {% set default_v = "Standard" %}
        {% else %}
            {% set default_v = v %}
        {% endif %}
        {% if available == "both" %}
        {% if item == "Game" %}
        <p id="desc" class="text-center">Choose Key or Crack for <strong>{{sw.name}}</strong>  {{platform}} {{default_v}} Edition</p>
        {% else %}
        <p id="desc" class="text-center">Choose Key or Crack for <strong>{{sw.name}}</strong> version {{default_v}} {{platform}}</p>
        {% endif %}
        <select class="form-select form-select-lg my-3 w-75" aria-label="Large select example">
            <option selected>Choose an option</option>
            <option class="choiceOption" myvalue="Key">Key</option>
            <option class="choiceOption" myvalue="Crack">Download Crack</option>
        </select>
        <button id="submitBtn" class="mybtn animate__animated" style="cursor: pointer; padding: 12px 30px !important;">
          Continue >
          <!-- <i style="margin-left: 30px;" class="fas fa-arrow-right" ></i> -->
        </button>
        {% else %}
        <p id="desc" style="font-size: 1rem;" class="text-center">{{available}} of <strong>{{sw.name}}</strong> is available for {{platform}}</p>
        <select class="form-select form-select-lg my-3 w-75" aria-label="Large select example" style="display: none;">
            <option>Choose an option</option>
            <option selected class="choiceOption" myvalue="{{available}}">{{available}}</option>
        </select>
        <button id="submitBtn" class="mybtn" style="cursor: pointer;">
          Get {{available}}
          <!-- <i style="margin-left: 30px;" class="fas fa-arrow-right" ></i> -->
        </button>
        {% endif %}
        
        </div>
        <footer>
          <div id="footerContent">
            <a href="https://keey.es/"class="footerLink">Home</a>
            <a href="/Disclaimer/" class="footerLink">Disclaimer</a>
            <a href="/Contact/" class="footerLink">Contact Us</a>
          </div>
          <div id="CR" class="text-center">Keey.es &copy; 2024 - All Rights Reserved</div>
        </footer> 
    </div>
    </body>
    <!-- <script src="https://kit.fontawesome.com/7d3f73a100.js" crossorigin="anonymous"></script> -->
    <script>
      let choiceOptionList =  document.querySelectorAll(".choiceOption");
      document.getElementById("submitBtn").addEventListener("click", (e)=>{
        let anOptionNotSelected = true;
        choiceOptionList.forEach(option => {
          if (option.selected) {
            anOptionNotSelected = false;
            console.log(`Value of selected option is ${option.getAttribute("myvalue")}`);
            let choice = option.getAttribute("myvalue");
            let linkforkey = `get_key/{{item}}/{{platform}}/{{sw.id}}/${choice}/{{v}}`;
            let linkforCrack = `get_key/{{item}}/{{platform}}/{{sw.id}}/${choice}/{{v}}`;
            // let linkforDownload = `${API_LINK}/download_crack/{{item}}/{{sw.id}}/{{platform}}`;
            if (choice == "Key") {               
                loadPage(linkforkey);      
            }
            else if (choice == "Crack") {
                // let linkforDownload = window.location.protocol + 
                // window.open(linkforDownload, "_blank");
                loadPage(linkforCrack);
                // console.log(window.location.protocol)
                // console.log(window.location.host)
                // console.log(window.location.hostname)
            }
          }
        });
        if (anOptionNotSelected) {
          window.alert("Please choose an option");
        }
      })
    </script>

    <script>
      // let suggestions = fetchAsync_json(`${API_LINK}/api/suggestions`, "GET");
      function showToast(sw_name) {
        let name;
        if (sw_name) {
          name = sw_name
        } else {
          let index = Math.floor(Math.random() * suggestions.length);
          name = suggestions[index];
        }
        
        let software_ID = id_dict[name][0];
        let type = id_dict[name][2];
        let msgList = [ "Key", "Crack File" ]
        let toast = document.createElement("div");
        
        toast.setAttribute("id", "toast")
        // toast.setAttribute("data-aos", "fade-down")
        toast.setAttribute("role", "alert")
        toast.setAttribute("aria-live", "assertive")
        toast.setAttribute("aria-atomic", true)
      
        toast.classList.add("toast", "show")
        toast.innerHTML = `
        <div style="display: flex; align-items: center;" class="toast-header">
          <img src="https://i.ibb.co/7JrD6wK/notification-icon.png" class="rounded me-2" alt="icon" width="20">
          <strong class="me-auto">New Alert!</strong>
          <small>${Math.floor(Math.random() * 15)} mins ago</small>
        </div>
        <div class="toast-body">
          Someone generated a <strong>${msgList[Math.floor(Math.random() * msgList.length)]}</strong> for <strong>${name}</strong>
        </div>
        `
        document.body.appendChild(toast)
        console.log("toast added")
        setTimeout(() => {
          try {
            document.body.removeChild(toast);           
        } catch (error) {
            
        }
        }, 5000);
      }
    
      let toastInterval = setInterval(showToast, 10000);
      </script>
    
    </html>