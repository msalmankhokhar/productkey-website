<!doctype html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Keey.es</title>
    <meta name="description" content="We provide genuine activation keys of popular paid softwares">
    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">
    <!-- <link href="https://unpkg.com/aos@2.3.1/dist/aos.css" rel="stylesheet"> -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css">
    <link rel="stylesheet" href="static/css/bg.css">
    <link rel="stylesheet" href="static/css/comman2.css">
    <link rel="stylesheet" href="static/css/home.css">
</head>

<!-- <div class="container">
  </div> -->
<style>
    @import url('https://fonts.googleapis.com/css2?family=Poppins:wght@200;300;400;500;600;700&display=swap');

    * {
        box-sizing: border-box;
        font-family: 'Poppins', sans-serif;
    }

    body {
        /* background: #f4f5;
  padding: 0 20px; */
    }

    ::selection {
        color: #fff;
        background: #664AFF;
    }

    .container .searchInput {
        background: #fff;
        width: 100%;
        border-radius: 5px;
        position: relative;
        box-shadow: 0px 1px 5px 3px rgba(0, 0, 0, 0.12);
    }

    .searchInput input {
        height: 55px;
        width: 100%;
        outline: none;
        border: none;
        border-radius: 5px;
        padding: 0 60px 0 20px;
        font-size: 18px;
        box-shadow: 0px 1px 5px rgba(0, 0, 0, 0.1);
    }

    .searchInput.active input {
        border-radius: 5px 5px 0 0;
    }

    .searchInput .resultBox {
        padding: 0;
        opacity: 0;
        pointer-events: none;
        max-height: 280px;
        overflow-y: auto;
        position: absolute;
        z-index: 1;
        width: 100%;
        background: #fff;
        box-shadow: 0px 1px 5px 3px rgba(0, 0, 0, 0.12);
    }

    .searchInput.active .resultBox {
        padding: 10px 8px;
        opacity: 1;
        pointer-events: auto;
    }

    .resultBox li {
        list-style: none;
        padding: 8px 12px;
        display: none;
        width: 100%;
        cursor: default;
        border-radius: 3px;
    }

    .searchInput.active .resultBox li {
        display: flex;
        column-gap: 10px;
        align-items: center;
    }

    .resultBox li:hover {
        background: #efefef;
    }

    .searchInput .icon {
        position: absolute;
        right: 0px;
        top: 0px;
        height: 55px;
        width: 55px;
        text-align: center;
        line-height: 55px;
        font-size: 20px;
        color: #644bff;
        cursor: pointer;
    }
</style>
<style>
    #contentWrapper {
        display: flex;
        flex-direction: column;
        row-gap: 20px;
        padding: 20px 20px;
        justify-content: space-evenly;
        align-items: center;
    }

    #main {
        height: 100%;
        display: flex;
        flex-direction: column;
        row-gap: 20px;
        padding: 20px 20px;
    }

    #itemThumbnail {
        width: 75px;
    }

    #swWrapper {
        display: flex;
        flex-direction: column;
        row-gap: 10px;
        align-items: center;
    }

    #procInfo {
        font-size: 1.1rem;
        text-align: center;
    }

    #swname {
        font-size: 120%;
    }

    #procContainer {
        width: 100%;
        display: flex;
        flex-direction: column;
        align-items: stretch;
        row-gap: 22px;
    }

    #keyCont {
        align-self: center;
        box-shadow: 1px 1px 6px gray;
        padding: 15px;
        border-radius: 5px;
        /* font-weight: bold; */
        color: #5a5a5a;
    }

    #spinner {
        align-self: center;
    }
    #belowKeyText{
        color: #686868;
    }
</style>

<body>

    <div>
        <div class="wave"></div>
        <div class="wave"></div>
        <div class="wave"></div>
    </div>

    <div class="container" id="container">


        <div id="header">
            <h1 class="text-center">Keey.es</h1>
            <p class="text-center">Online Product keys Archive</p>
        </div>
        <div id="contentWrapper">

            <div id="swWrapper">
                <img id="itemThumbnail" src="{{sw.imgSrc}}" alt="thumbnail">
                <span id="swname">{{sw.name}}</span>
            </div>
            <div id="procContainer">
                <p id="procInfo">Processing your request</p>
                <!-- <div class="text-center"> -->
                <div id="spinner" class="spinner-border text-secondary" style="width: 3rem; height: 3rem;"
                    role="status">
                    <span class="visually-hidden">Loading...</span>
                </div>
                <!-- </div> -->
                <div id="keyCont" style="display: none;">
                    3AVVC-2JBOF-BXN1D-YN9E6
                </div>
                <div class="progress" role="progressbar" aria-label="Animated striped example" aria-valuenow="0"
                    aria-valuemin="0" aria-valuemax="100">
                    <div id="pBar" class="progress-bar progress-bar-striped progress-bar-animated" style="width: 0%">
                    </div>
                </div>
                <p id="belowKeyText" class="text-center" style="display: none;">Lorem ipsum dolor sit amet consectetur adipisicing elit. Corrupti, esse obcaecati voluptatibus debitis libero possimus nostrum, velit quaerat enim repellat dolorem adipisci optio iusto eius molestiae inventore natus! Sit, sint.</p>
            </div>

        </div>

        <footer>
            <div id="footerContent">
              <a href="/Disclaimer/index.html" class="footerLink">Disclaimer</a>
              <a href="/Contact/index.html" class="footerLink">Contact Us</a>
            </div>
            <div id="CR" class="text-center">Keey.es &copy; 2024 - All Rights Reserved</div>
          </footer>
    </div>
</body>

<script>
    {% if platform == "PlayStation" %}
    let keys_list = [
        "0TD7R-Y3KMG-HU2A7-F4C5J",
        "NVFMH-W1HYN-Y60O9-7WMCL",
        "A6HVX-BQVSH-X22H7-WTBDR",
        "O6TFU-9E2RS-NCL6T-0DMTY",
        "7P5WO-LIKUR-ZS3V7-DI0GP",
        "Q3MX5-Z71RD-D1X8P-CYPR1",
        "1V134-Q244Y-DJ2QP-2BX8N",
        "V7L9T-TEGWK-W6LOV-Z0CG3",
        "SZMAQ-JUE2N-G6PQX-I1QE9",
        "M1CSY-4TM6Y-S1HWQ-AR8VL",
        "ASNKY-P0W1C-LO9GL-P9F42",
        "ATE4N-ET1EP-X2ENR-QX9C9",
        "P0MI8-5UR11-94IU4-1SKFF",
        "12CFU-TOBNF-E5VRE-8O71Y",
        "9SY3A-3QGUP-984FM-XMGNS",
        "WZVSB-BGW30-O4YRB-4A9T7",
        "E2EMR-JNAWP-1FEPH-YVGIN",
        "1NJMA-X4S6W-BEAUB-Z3U0B",
        "UKYI4-4SFOH-VVASQ-3IXIB",
        "UKYI4-4SFOH-VVASQ-3IXIB",
        "ZMCG8-1M8Z9-ET06R-Y4I1K",
        "NP12R-UOG6K-048T6-ETIDQ",
        "K0YI2-ZM354-SR7A5-4QEDD",
    ]
    {% else %}
    let keys_list = [
        "TD7R-3KMG-HU2A-4C5J",
        "VFMH-1HYN-Y60O-WMCL",
        "6HVX-QVSH-X22H-TBDR",
        "6TFU-E2RS-NCL6-DMTY",
        "P5WO-IKUR-ZS3V-I0GP",
        "3MX5-71RD-D1X8-YPR1",
        "V134-244Y-DJ2Q-BX8N",
        "7L9T-EGWK-W6LO-0CG3",
        "ZMAQ-UE2N-G6PQ-1QE9",
        "1CSY-TM6Y-S1HW-R8VL",
        "SNKY-0W1C-LO9G-9F42",
        "TE4N-T1EP-X2EN-X9C9",
        "0MI8-UR11-94IU-SKFF",
        "2CFU-OBNF-E5VR-O71Y",
        "SY3A-QGUP-984F-MGNS",
        "ZVSB-GW30-O4YR-A9T7",
        "2EMR-NAWP-1FEP-VGIN",
        "NJMA-4S6W-BEAU-3U0B",
        "KYI4-SFOH-VVAS-IXIB",
        "KYI4-SFOH-VVAS-IXIB",
        "MCG8-M8Z9-ET06-4I1K",
        "P12R-OG6K-048T-TIDQ",
        "0YI2-M354-SR7A-QEDD",
    ]
    {% endif %}

    function generate_random_key() {
        const randomIndex = Math.floor(Math.random() * keys_list.length);
        keyCont.innerHTML = keys_list[randomIndex];
    }


    function getRandomInt(min, max) {
        return Math.floor(Math.random() * (max - min + 1)) + min;
    }

    function generateProductKey() {
        var tokens = "ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789",
            chars = 5,
            segments = 4,
            keyString = "";

        for (var i = 0; i < segments; i++) {
            var segment = "";

            for (var j = 0; j < chars; j++) {
                var k = getRandomInt(0, 35);
                segment += tokens[k];
            }

            keyString += segment;

            if (i < (segments - 1)) {
                keyString += "-";
            }
        }

        // return keyString;
        keyCont.innerHTML = keyString;

    }
</script>

<script>
    let choice = "{{choice}}";
    let info = document.getElementById("procInfo");
    let pBar = document.getElementById("pBar");
    let spinner = document.getElementById("spinner");
    let keyCont = document.getElementById("keyCont");
    let pBar_length = 0;
    let infoList;
    if (choice == "Key") {
         infoList = [
            "Processing your request",
            "Connecting to server",
            "Performing Auto-Unlock",
            {% if v == None %}
                {% set default_v = "Standard" %}
            {% else %}
                {% set default_v = v %}
            {% endif %}
            {% if item == "Game" %}
            "Fetching product key for <strong>{{sw.name}}</strong> {{default_v}} Edition {{platform}}"
            {% else %}
            "Fetching product key for <strong>{{sw.name}}</strong> Version {{default_v}} {{platform}}"
            {% endif %}
                    ];
    } else {       
         infoList = [
            "Processing your request",
            "Connecting to server",
            {% if v == None %}
                {% set default_v = "Standard" %}
            {% else %}
                {% set default_v = v %}
            {% endif %}
            {% if item == "Game" %}
            "Searching download resources for <strong>{{sw.name}}</strong> {{default_v}} Edition {{platform}}",
            {% else %}
            "Searching download resources for <strong>{{sw.name}}</strong> Version {{default_v}} {{platform}}",
            {% endif %}
            "Generating Download link"
                    ];
    }

    function startDownload(url) {
        let downloadLink = document.createElement('a');
        downloadLink.href = url;
        downloadLink.download = url.split('/').pop();
        document.body.appendChild(downloadLink);
        downloadLink.click();
        document.body.removeChild(downloadLink);
    }

    let pBar_interval = setInterval(() => {       
        pBar_length += 0.8;
        pBar.style.width = pBar_length.toString() + "%";
        if (pBar_length >= 100) {
            clearInterval(pBar_interval);
            if (choice == "Crack") {
            let linkforDownload = `${API_LINK}/download_crack/{{item}}/{{sw.id}}/{{platform}}`;
            // startDownload(linkforDownload);
            pBar.parentElement.style.opacity = 0;
            spinner.style.display = "none";
            info.innerHTML = "Your download is ready. Follow the instructions to unlock your download";
            keyCont.innerText = "Unlock your download";
            keyCont.classList.add("animate__animated", "animate__pulse", "animate__infinite");
            keyCont.style.backgroundColor = "green";
            keyCont.style.color = "white";
            keyCont.style.display = "block";
            keyCont.style.cursor = "pointer";
            document.getElementById("belowKeyText").style.display = "block";
            }   
        }
    }, 100);

    function showFinalKey(key) {
        spinner.style.display = "none";
        info.innerHTML = "Congrats! Your key is";
        keyCont.classList.add("animate__animated", "animate__pulse", "animate__infinite");
        keyCont.innerHTML = hideProductKey(key);
        keyCont.style.backgroundColor = "green";
        keyCont.style.color = "white";
        // console.log(`choice is ${choice}`)
        // if (choice == "Key") {            
            document.getElementById("belowKeyText").style.display = "block";
        // }
    }

    function run() {          
        keyCont.style.display = "block";
        let suffleKeyInterval = setInterval(generate_random_key, 201);
        setTimeout(() => {
            fetch(`${API_LINK}/product_key/{{item}}/{{platform}}/{{sw.id}}`, {
                method: "GET"
            }).then((resp) => {
                return resp.json().then((respText) => {
                clearInterval(suffleKeyInterval);
                // clearInterval(pBar_interval);
                showFinalKey(respText["key"]);
                pBar.parentElement.style.display = "none";
                // pBar.parentElement.style.opacity = 0;
                })
            })
        }, 5000);   
    }

    function updateInfo() {
        let txt = infoList[currentIndex];       
        info.innerHTML = txt;
        console.log(txt);
        currentIndex++;
        if (currentIndex === infoList.length) {
            clearInterval(updateInfoInterval);
            if (choice == "Key") {
                run();
                // console.log("run");
            }
        }
    }

    let currentIndex = 0;
    let updateInfoInterval = setInterval(updateInfo, 2000);

</script>

<script>
    suggestions = fetchAsync_json(`${API_LINK}/api/suggestions`, "GET");
    function showToast(sw_name) {
      let name;
      if (sw_name) {
        name = sw_name
      } else {
        let index = Math.floor(Math.random() * suggestions.length);
        name = suggestions[index];
      }
      
      let software_ID = id_dict[name][0];
      let type = id_dict[name][2];
      let msgList = [ "Key", "Download link" ]
      let toast = document.createElement("div");
      
      toast.setAttribute("id", "toast")
      toast.setAttribute("data-aos", "fade-down")
      toast.setAttribute("role", "alert")
      toast.setAttribute("aria-live", "assertive")
      toast.setAttribute("aria-atomic", true)
     
      toast.classList.add("toast", "show")
      toast.innerHTML = `
      <div style="display: flex; align-items: center;" class="toast-header">
        <img src="https://image.similarpng.com/very-thumbnail/2020/08/Illustration-of-light-bulb-icon-on-transparent-background-PNG.png" class="rounded me-2" alt="icon" width="20">
        <strong class="me-auto">Notification</strong>
        <small>${Math.floor(Math.random() * 15)} mins ago</small>
      </div>
      <div class="toast-body">
        Someone generated ${msgList[Math.floor(Math.random() * msgList.length)]} for <strong>${name}</strong>
      </div>
      `
      // `id="toast" class="toast show" data-aos="fade-down" role="alert" aria-live="assertive" aria-atomic="true"`
      document.body.appendChild(toast)
      setTimeout(() => {
        document.body.removeChild(toast);
      }, 5000);
    }
    
    let toastInterval = setInterval(showToast, 10000);
    </script>

</html>